<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LOTIZACION</title>
  <style>
    :root{--accent:#0b74de;--muted:#666}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0;color:#222}
    header{background:linear-gradient(90deg,#063b6b 0%,#0b74de 100%);color:#fff;padding:20px}
    .container{max-width:1100px;margin:18px auto;padding:0 18px}
    .top{display:flex;align-items:center;gap:18px}
    .brand{font-size:20px;font-weight:700}
    nav a{color:#fff;text-decoration:none;margin-left:14px}
    .hero{display:flex;gap:20px;align-items:center;padding:28px 0}
    .hero .left{flex:1}
    .hero h1{font-size:34px;margin:0}
    .hero p{color:var(--muted);margin:8px 0}
    .card{background:#fff;border-radius:10px;padding:18px;box-shadow:0 6px 20px rgba(15,23,42,0.06)}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:20px}
    .map-wrap iframe{width:100%;height:380px;border:0;border-radius:8px}
    .section{margin-top:18px}
    footer{padding:24px 0;color:#666;font-size:14px}
    .edit-toolbar{position:fixed;right:18px;top:18px;background:#fff;padding:12px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.12);z-index:999}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;background:var(--accent);color:#fff;text-decoration:none}
    label{font-size:13px;color:#333;display:block;margin-top:10px}
    input[type=text],textarea,select{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px;margin-top:6px}
    .small{font-size:13px;color:var(--muted)}
    .links-list a{display:block;margin-bottom:6px;color:var(--accent)}
    .editable{outline:2px dashed rgba(11,116,222,0.12);padding:4px;border-radius:4px}
  </style>
</head>
<body>
  <header>
    <div class="container top">
      <div class="brand" id="brand" contenteditable="true">Buenavista - Nombre de tu proyecto</div>
      <nav style="margin-left:auto">
        <a href="#info" id="nav-info">Proyecto</a>
        <a href="#mapcontent" id="nav-map">Mapa</a>
        <a href="#contact" id="nav-contact">Contacto</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero card">
      <div class="grid">
        <div class="left">
          <h1 id="title" contenteditable="true">LOTIZACION</h1>
          <p id="subtitle" contenteditable="true">Subtítulo breve: ubicación, concepto y beneficiarios.</p>

          <div class="section">
            <h3>Detalles del proyecto</h3>
            <div id="project-details" contenteditable="true" class="editable">
              <p>Aquí puede escribir la descripción completa del proyecto: características, etapas, áreas, precios, plazos y cualquier información que desee mostrar.</p>
            </div>
          </div>

          <div class="section">
            <h3>Enlaces rápidos</h3>
            <div class="links-list" id="links-list">
              <!-- links dinámicos -->
            </div>
          </div>
        </div>

        <aside class="card">
          <h4>Ubicación</h4>
          <div id="mapcontent" class="map-wrap">
            <!-- mapa embebido editable -->
            <iframe id="map-iframe" src="https://maps.google.com/maps?q=Llano%20-%20ubicacion&t=&z=13&ie=UTF8&iwloc=&output=embed" loading="lazy"></iframe>
          </div>

          <div class="section">
            <h4>Contacto</h4>
            <div id="contact" contenteditable="true" class="editable">
              <p>Empresa S.A. | teléfono: (01) 000-0000 | correo@ejemplo.com</p>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <section class="section card">
      <h3>Galería / Planos</h3>
      <p class="small">Puede reemplazar estas imágenes con las suyas subiendo en su servidor y cambiando los &lt;img&gt; src.</p>
      <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px">
        <img src="https://via.placeholder.com/320x180?text=Imagen+1" alt="img1" style="width:100%;border-radius:8px">
        <img src="https://via.placeholder.com/320x180?text=Imagen+2" alt="img2" style="width:100%;border-radius:8px">
        <img src="https://via.placeholder.com/320x180?text=Imagen+3" alt="img3" style="width:100%;border-radius:8px">
      </div>
    </section>

    <footer class="container">
      <div class="card" style="padding:12px">
        <div contenteditable="true" id="footer-text">© 2025 Tu Empresa - Todos los derechos reservados.</div>
      </div>
    </footer>
  </main>

  <!-- Panel de edición lateral -->
  <div class="edit-toolbar card" id="editor">
    <strong>Panel de edición</strong>
    <label>Nombre/Marca</label>
    <input type="text" id="inp-brand" placeholder="Buenavista - Nombre">

    <label>Título de la página</label>
    <input type="text" id="inp-title" placeholder="Título del proyecto">

    <label>Subtítulo</label>
    <input type="text" id="inp-subtitle" placeholder="Subtítulo corto">

    <label>Iframe mapa (URL)</label>
    <input type="text" id="inp-map" placeholder="https://maps.google.com/...">

    <label>Contacto (HTML)</label>
    <textarea id="inp-contact" rows="3"></textarea>

    <label>Agregar hipervínculo (texto|url)</label>
    <input type="text" id="inp-link" placeholder="Ficha técnica|https://ejemplo.com/ficha">
    <button class="btn" id="add-link">Agregar enlace</button>

    <div style="margin-top:10px;display:flex;gap:8px">
      <button class="btn" id="apply">Aplicar cambios</button>
      <button class="btn" id="download">Descargar HTML</button>
    </div>
    <p class="small" style="margin-top:8px">Los campos editables en la página (texto y contactos) también se pueden editar directamente haciendo clic sobre ellos.</p>
  </div>

  <script>
    // sincronización inputs -> contenido
    const setText = (id, value)=>document.getElementById(id).textContent = value;
    document.getElementById('apply').addEventListener('click',()=>{
      const b=document.getElementById('inp-brand').value;
      const t=document.getElementById('inp-title').value;
      const s=document.getElementById('inp-subtitle').value;
      const m=document.getElementById('inp-map').value;
      const c=document.getElementById('inp-contact').value;
      if(b) setText('brand', b);
      if(t) setText('title', t);
      if(s) setText('subtitle', s);
      if(c) document.getElementById('contact').innerHTML = c;
      if(m) document.getElementById('map-iframe').src = m;
      saveToLocal();
      alert('Cambios aplicados (y guardados localmente).');
    });

    // Agregar link dinámico
    document.getElementById('add-link').addEventListener('click',()=>{
      const v=document.getElementById('inp-link').value.trim();
      if(!v.includes('|')){alert('Use el formato: Texto|https://...');return}
      const parts=v.split('|');
      const a=document.createElement('a');
      a.href=parts[1].trim();a.target='_blank';a.textContent=parts[0].trim();
      document.getElementById('links-list').appendChild(a);
      document.getElementById('inp-link').value='';
      saveToLocal();
    });

    // Descargar HTML - exporta el HTML actual como archivo
    document.getElementById('download').addEventListener('click',()=>{
      // build a cleaned copy of the current document's HTML
      const doc = document.documentElement.cloneNode(true);
      // remove the editor toolbar from export
      const toolbar = doc.querySelector('#editor'); if(toolbar) toolbar.remove();
      // add a small comment to show it was exported
      const serializer = new XMLSerializer();
      const str = '<!-- Exportado desde plantilla editable - modifique y suba a su hosting -->\n' + serializer.serializeToString(doc);
      const blob = new Blob([str],{type:'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href=url; a.download = 'index.html'; document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    });

    // persistencia simple en localStorage
    function saveToLocal(){
      const state = {
        brand: document.getElementById('brand').innerHTML,
        title: document.getElementById('title').innerHTML,
        subtitle: document.getElementById('subtitle').innerHTML,
        details: document.getElementById('project-details').innerHTML,
        contact: document.getElementById('contact').innerHTML,
        map: document.getElementById('map-iframe').src,
        links: Array.from(document.getElementById('links-list').querySelectorAll('a')).map(a=>({t:a.textContent,u:a.href})),
        footer: document.getElementById('footer-text').innerHTML
      };
      localStorage.setItem('plantilla_state', JSON.stringify(state));
    }
    function loadFromLocal(){
      const s = localStorage.getItem('plantilla_state'); if(!s) return;
      try{
        const state = JSON.parse(s);
        if(state.brand) document.getElementById('brand').innerHTML = state.brand;
        if(state.title) document.getElementById('title').innerHTML = state.title;
        if(state.subtitle) document.getElementById('subtitle').innerHTML = state.subtitle;
        if(state.details) document.getElementById('project-details').innerHTML = state.details;
        if(state.contact) document.getElementById('contact').innerHTML = state.contact;
        if(state.map) document.getElementById('map-iframe').src = state.map;
        if(state.links){
          const ll = document.getElementById('links-list'); ll.innerHTML='';
          state.links.forEach(x=>{const a=document.createElement('a');a.href=x.u;a.target='_blank';a.textContent=x.t;ll.appendChild(a)});
        }
        if(state.footer) document.getElementById('footer-text').innerHTML = state.footer;
      }catch(e){console.warn('No se pudo cargar estado:',e)}
    }
    // auto-save al salir de edición
    window.addEventListener('beforeunload', saveToLocal);
    // inicializar
    loadFromLocal();

    // Hacer que los campos contenteditable actualicen inputs al hacer doble click (para copiar)
    ['brand','title','subtitle','contact'].forEach(id=>{
      const el=document.getElementById(id);
      el.addEventListener('dblclick',()=>{
        // copia a inputs para editar más cómodamente
        if(id==='brand') document.getElementById('inp-brand').value = el.textContent.trim();
        if(id==='title') document.getElementById('inp-title').value = el.textContent.trim();
        if(id==='subtitle') document.getElementById('inp-subtitle').value = el.textContent.trim();
        if(id==='contact') document.getElementById('inp-contact').value = el.innerHTML.trim();
      })
    });

    // pequeñas mejoras de accesibilidad: navegación por anclas
    document.querySelectorAll('nav a').forEach(a=>a.addEventListener('click',e=>{e.preventDefault();const t=document.querySelector(a.getAttribute('href'));if(t) t.scrollIntoView({behavior:'smooth'})}));

  </script>
</body>
</html>
